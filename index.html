<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Immersive VR Gallery</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <style>
    html, body {
      margin: 0;
      width: 100%;
      height: 100%;
      background: #111;
      overflow: hidden;
    }
  </style>

  <!-- Floating + gaze brightening effect -->
  <script>
AFRAME.registerComponent('float-gaze-parallax', {
  schema: {
    scale: { default: 1.15 },
    floatAmount: { default: 0.15 }
  },

  init: function () {
    this.originalScale = this.el.object3D.scale.clone();
    this.baseY = this.el.object3D.position.y;
    this.isGazed = false;

    const mesh = this.el.getObject3D('mesh');
    if (mesh) this.originalColor = mesh.material.color.clone();
  },

  tick: function (time) {
    // FLOAT (anchored, no accumulation)
    this.el.object3D.position.y =
      this.baseY + Math.sin(time / 1000) * this.data.floatAmount * 0.01;

    // SCALE
    const targetScale = this.isGazed
      ? this.originalScale.clone().multiplyScalar(this.data.scale)
      : this.originalScale;

    this.el.object3D.scale.lerp(targetScale, 0.08);

    // BRIGHTEN
    const mesh = this.el.getObject3D('mesh');
    if (!mesh || !this.originalColor) return;

    if (this.isGazed) {
      mesh.material.color.lerp(new THREE.Color(1,1,1), 0.1);
    } else {
      mesh.material.color.lerp(this.originalColor, 0.05);
    }
  },

  events: {
    mouseenter: function () { this.isGazed = true; },
    mouseleave: function () { this.isGazed = false; }
  }
});
    
</script>
  
  <!-- Circular gallery layout -->
  <script>
    AFRAME.registerComponent('gallery-ring', {
      schema: {
        radius: { default: 7 },
        arc: { default: 180 }, // semi-circle in front
        height: { default: 2 }
      },

      init: function () {
        const items = this.el.querySelectorAll('[data-src]');
        const count = items.length;
        const arcRad = THREE.MathUtils.degToRad(this.data.arc);
        const step = (count > 1) ? arcRad / (count - 1) : 0;

        items.forEach((el, i) => {
          const angle = -arcRad / 2 + i * step;
          const x = Math.sin(angle) * this.data.radius;
          const z = -Math.cos(angle) * this.data.radius;

          el.setAttribute('position', `${x} ${this.data.height} ${z}`);
          el.object3D.lookAt(new THREE.Vector3(0, this.data.height, 0));
        });
      }
    });
  </script>

</head>
<body>
  <a-scene vr-mode-ui="enabled: true" shadow="type: pcfsoft" background="color: #111">

    <!-- Preload images -->
    <a-assets>
      <img id="img1" src="image01.jpg">
      <img id="img2" src="image02.jpg">
      <img id="img3" src="image03.jpg">
      <img id="img4" src="image04.jpg">
      <img id="img5" src="image05.jpg">
      <img id="img6" src="image06.jpg">
      <img id="img7" src="image07.jpg">
      <img id="img8" src="image08.jpg">
      <img id="img9" src="image09.jpg">
      <img id="img10" src="image10.jpg">
    </a-assets>

    <!-- Camera + cursor -->
    <a-entity position="0 1.6 0">
      <a-camera>
        <a-cursor fuse="true" fuse-timeout="800" color="#fff"></a-cursor>
      </a-camera>
    </a-entity>

    <!-- Ground -->
    <a-plane rotation="-90 0 0" width="40" height="40" material= standard color="#0a0a0a" shadow="receive: true"></a-plane>

    <!-- Gallery Ring -->
    <a-entity position="0 1.6 0" gallery-ring>
      <a-box src="#img1" data-src width="2" height="3" depth="0.2" material="shader: standard; roughness: 1; metalness: 0; emissive: #111; emissiveIntensity: 0.2; color: #ffffff" shadow="cast: true" float-gaze-parallax></a-box>
      <a-box src="#img2" data-src width="2" height="3" depth="0.2" material="shader: standard; roughness: 1; metalness: 0; emissive: #111; emissiveIntensity: 0.2; color: #ffffff" shadow="cast: true" float-gaze-parallax></a-box>
      <a-box src="#img3" data-src width="2" height="3" depth="0.2" material="shader: standard; roughness: 1; metalness: 0; emissive: #111; emissiveIntensity: 0.2; color: #ffffff" shadow="cast: true" float-gaze-parallax></a-box>
      <a-box src="#img4" data-src width="2" height="3" depth="0.2" material="shader: standard; roughness: 1; metalness: 0; emissive: #111; emissiveIntensity: 0.2; color: #ffffff" shadow="cast: true" float-gaze-parallax></a-box>
      <a-box src="#img5" data-src width="2" height="3" depth="0.2" material="shader: standard; roughness: 1; metalness: 0; emissive: #111; emissiveIntensity: 0.2; color: #ffffff" shadow="cast: true" float-gaze-parallax></a-box>
      <a-box src="#img6" data-src width="2" height="3" depth="0.2" material="shader: standard; roughness: 1; metalness: 0; emissive: #111; emissiveIntensity: 0.2; color: #ffffff" shadow="cast: true" float-gaze-parallax></a-box>
      <a-box src="#img7" data-src width="2" height="3" depth="0.2" material="shader: standard; roughness: 1; metalness: 0; emissive: #111; emissiveIntensity: 0.2; color: #ffffff" shadow="cast: true" float-gaze-parallax></a-box>
      <a-box src="#img8" data-src width="2" height="3" depth="0.2" material="shader: standard; roughness: 1; metalness: 0; emissive: #111; emissiveIntensity: 0.2; color: #ffffff" shadow="cast: true" float-gaze-parallax></a-box>
      <a-box src="#img9" data-src width="2" height="3" depth="0.2" material="shader: standard; roughness: 1; metalness: 0; emissive: #111; emissiveIntensity: 0.2; color: #ffffff" shadow="cast: true" float-gaze-parallax></a-box>
      <a-box src="#img10" data-src width="2" height="3" depth="0.2" material="shader: standard; roughness: 1; metalness: 0; emissive: #111; emissiveIntensity: 0.2; color: #ffffff" shadow="cast: true" float-gaze-parallax></a-box>
    </a-entity>

      <a-light
        type="directional"
        position="2 10 5"
        intensity="3"
        castShadow="true"
        shadow-mapWidth="1024"
        shadow-mapHeight="1024">
      </a-light>

      <a-light
        type="ambient"
        intensity="0.4"
        color="#ffffff">
      </a-light>

  </a-scene>
</body>
</html>
